see# Modern DataBase Management

## 資料庫管理

## 目錄

[DB ch01](#db-ch01-資料庫概念)
[DB ch02](#db-ch02-資料庫設計與er模型)
[DB ch03](#db-ch03-增強型er模型與商業規則)
[DB ch04](#db-ch04-正規化理論與設計)

### **DB ch01: 資料庫概念**

1. **資料庫管理系統 (DBMS) 功能**：
   - **數據儲存**：管理大量數據並提供高效的查詢和更新功能。
   - **安全性與存取控制**：透過訪問控制和數據加密來保護資料。
   - **資料一致性和完整性**：透過約束（如主鍵、外鍵）確保資料正確性。

2. **DBMS的優勢**：
   - **資料獨立性**：數據的物理變更不影響應用程式。
   - **資料共用**：支持多用戶並行訪問和使用數據。
   - **減少資料冗餘**：減少重複數據，提升數據一致性。

3. **DBMS架構**：
   - **兩層架構**：用戶端與伺服器端直接交互，適用於小型應用。
   - **三層架構**：包括用戶端、應用伺服器和資料伺服器，常用於企業應用。

4. **資料庫生命週期 (SDLC)**：
   - **需求分析**：確定資料庫的用途和需求。
   - **概念設計**：建立ER模型。
   - **邏輯設計**：將ER模型轉換為關係模型。
   - **物理設計**：選擇數據存儲方式，如索引、分區等。
   - **實施與維護**：部署、測試及持續更新。

---

### **DB ch02: 資料庫設計與ER模型**

1. **實體-關聯模型 (ER模型)**：
   - 使用ER模型表示現實世界中的業務需求。
   - **實體**：例如學生、課程；**屬性**：如學生的姓名；**關聯**：如「學生選修課程」。

2. **實體關係類型**：
   - **一對一 (1:1)**：如「人員-護照」。
   - **一對多 (1:N)**：如「教師-學生」。
   - **多對多 (M:N)**：如「學生-課程」。

3. **鍵 (Key)**：
   - **主鍵**：唯一標識實體的屬性。
   - **外鍵**：建立實體間的參考關係。

4. **弱實體 (Weak Entity)**：
   - 無法單獨識別，依賴主實體，通常需引用主實體的主鍵。

5. **ER圖符號**：
   - 實體：矩形；屬性：橢圓；關係：菱形。主鍵屬性通常會有下劃線。

---

### **DB ch03: 增強型ER模型與商業規則**

1. **增強型ER模型 (EER)**：
   - **超類型 (Supertype)**：包含共同屬性的通用實體類型。
   - **子類型 (Subtype)**：擁有自身屬性的實體子集合。
   - **屬性繼承**：子類型會繼承超類型的屬性與關係。

2. **概括化與專業化**：
   - **概括化**：從專業化實體定義出更通用的超類型（自下而上）。
   - **專業化**：根據超類型創建子類型（自上而下）。

3. **完備性與互斥性約束**：
   - **完備性**：規定實體是否必須屬於某一子類型（完全完備性：雙線；部分完備性：單線）。
   - **互斥性**：定義實體是否可同時屬於多個子類型（互斥：僅屬於一個子類型；重疊：可同時屬於多個）。

4. **子類型鑑別器**：
   - 用於識別子類型的屬性，互斥情況使用簡單屬性，重疊情況使用複合屬性。

5. **實體集群 (Entity Clustering)**：
   - 將多個實體和關係分組形成抽象的實體，以簡化EER圖。

6. **封裝數據模型**：
   - 預定義模型，可作為項目的起始模板，具有易讀性和成本效益等優勢。
  
7. **Disjoint and Overlap 相交與不相交**：
   - 不相交代表的意思是指繼承只會有一個另一個不會繼承（ex病人不會同時出院跟住院）
   - 相交則是都有可能（ex零件可以是自產也可以是別人銷售來的）

---

### **DB ch04: 正規化理論與設計**

1. **不當設計的影響**：
   - 新增異常：
      * 新增學生，但未選課
      * 新增課程，但未被選課
      * 新增老師，但未授課
   - 刪除異常：
      * 刪除課程時，學生的成績資料遺失
   - 更新異常：
      * 更新課程資料時，需一次修改多筆資料
      * 更新老師資料時，需一次修改多筆資料

2. **正規化 (Normalization)**：
   - 一種設計技術，用於消除資料冗餘，增強一致性。
   - 將表格分解為更小的表格，逐步去除重複資料。

3. **正規化階段**：
   - **第一正規型 (1NF)**：消除重複屬性，每欄位原子化。
   - **第二正規型 (2NF)**：消除部分相依，非鍵屬性完全依賴於主鍵。
   - **第三正規型 (3NF)**：消除跨相依，非鍵屬性僅依賴於主鍵。
   - **BCNF**：加強了3NF的條件。

4. **功能相依 (Functional Dependency)**：
   - 描述屬性間的依賴，如「學號」決定「學生姓名」。
   - 完全相依：依賴整個主鍵；部分相依：依賴部分主鍵；轉移相依：間接依賴主鍵。

5. **反正規化 (Denormalization)**：
   - 出於查詢效率，在設計中有時引入數據冗餘。
   - 適合讀取頻繁的情境，提升查詢效能。

6. **設計流程中的正規化應用**：
   - 正規化通常應用於邏輯設計階段，確保效率與一致性間的平衡。

參考連結 <https://blog.build-school.com/2022/07/22/%E8%B3%87%E6%96%99%E5%BA%AB%E6%AD%A3%E8%A6%8F%E5%8C%96%E7%AD%86%E8%A8%98/>

---

### **額外補充**

### 1. **主鍵 (Primary Key)**
   - **定義**：主鍵是唯一標識一個實體的屬性或屬性組合。它能夠區分資料庫表中每一行的唯一性。
   - **作用**：在資料庫中，主鍵是必須的，因為它確保每個實體實例的唯一性。
   - **使用方法**：在ER圖中，主鍵屬性通常會加上**下劃線**以示區分。

### 2. **外來鍵 (Foreign Key)**
   - **定義**：外來鍵是一個或多個屬性，用於建立兩個實體間的關聯。它指向另一表的主鍵。
   - **作用**：外來鍵允許我們將兩個實體聯結起來，形成一對一、一對多或多對多的關係。
   - **使用方法**：在ER圖中，外來鍵屬性可以加上**虛線下劃線**或標注說明，具體表示方式取決於工具或格式。

### 2. **候選鍵 (Candidate Key)**
   - **定義**：候選鍵是一組屬性或屬性組合，能夠唯一識別實體中的每個實例。換句話說，候選鍵和主鍵一樣具有唯一性，但一個實體可以有多個候選鍵。
   - **作用**：在一個實體中，所有候選鍵都有資格成為主鍵，但只能選取其中一個作為最終的主鍵。其他候選鍵可以作為備用鍵（Alternate Key），以備需要替代主鍵的情況。
   - **特徵**
      1. 唯一性：每一候選鍵必須唯一識別實體中的每個實例。
      2. 不可約性：候選鍵中的屬性不可多不可少，即不能移除其中的任何屬性，否則將無法保證唯一性。

### 3. **虛線 (Dashed Line)**
   - **定義**：虛線用於表示弱實體的關聯，或表示一種非必須的（非強制性）關聯。
   - **使用時機**：
     - **弱實體的依賴**：若實體的存在依賴於另一實體，它們的關聯線常用虛線表示。
     - **可選關聯**：當一個關聯是選擇性的（即某些實體實例可能不需要參與該關聯），會用虛線來表示這種關聯。
   
### 4. **實線 (Solid Line)**
   - **定義**：實線通常表示實體之間的強制性或必須的關聯。
   - **使用時機**：
     - **強實體間的關聯**：實體間的主從關係（如部門-員工）若是強制性的（即每個實例都必須存在這種關聯），則會使用實線。
     - **強關聯**：表示實體之間存在堅固的依賴關係，例如外來鍵約束必須參照主表中的主鍵。

### 5. **弱實體 (Weak Entity)**
   - **定義**：弱實體無法通過自己的屬性唯一標識，通常依賴於另一個強實體。
   - **特徵**：弱實體通常包含複合鍵（由主實體的主鍵加上自身的識別碼組成）。
   - **表示方法**：在ER圖中，弱實體通常用雙矩形表示，其依賴的關聯線也會用虛線標示。

### 6. **關聯類型 (Cardinality)**：
   - **一對一 (1:1)**：一個實體實例只關聯另一個實體實例，常用在唯一配對的資料關係。
   - **一對多 (1:N)**：一個實體實例可以關聯多個實體實例，但反之不然，常用於層級結構，如部門和員工。
   - **多對多 (M:N)**：兩個實體的多個實例彼此相關聯，通常會引入第三個實體（關聯實體）來表示。

### 7. **參照完整性 (Referential Integrity)**
   - **定義**：參照完整性約束要求外來鍵的值必須存在於相關表的主鍵中。
   - **作用**：確保資料的一致性，使得子表中的資料始終可以在父表中找到對應的值。

### 8. **實體與屬性 (Entity and Attribute)**
   - **實體**：表示真實世界中具有獨立存在意義的物件或概念，例如「員工」。
   - **屬性**：描述實體的特徵或性質，例如「員工」的姓名、編號等。


