# **第 4 章：邏輯資料庫設計與關聯模型**

## **學習目標**

1. 定義術語。
2. 列出關係的五個特性。
3. 說明候選鍵的兩個特性。
4. 定義第一、第二和第三正規化形式。
5. 描述合併關係時可能出現的問題。
6. 將 E-R 與 EER 圖轉換為關係。
7. 創建具有實體與關係完整性約束的表。
8. 使用正規化分解異常關係為良構關係。

---

## **關聯模型的組成**

- **資料結構**：表 (關係)、列 (屬性)、行 (記錄)。
- **資料操作**：使用強大的 SQL 操作檢索與修改數據。
- **資料完整性**：實現業務規則以維持操作後的數據一致性。

---

## **關係的基本特性**

- 表格需具備唯一名稱。
- 每個屬性值需是不可分的 (原子性)。
- 行需唯一 (無重複)。
- 屬性名稱需唯一。
- 列與行的順序不影響資料。

---

## **關鍵欄位與完整性約束**

- **主鍵**：唯一標識表中每行的欄位。
- **外鍵**：用於引用父關係的標識符。
- **域約束**：屬性的允許值 (資料類型與範圍)。
- **實體完整性**：主鍵不得為空。
- **參考完整性**：
  - 外鍵需匹配父表主鍵或為空。
  - 刪除規則：
    - 限制 (Restrict)
    - 級聯 (Cascade)
    - 設置為空 (Set-to-Null)

---

## **E-R 與 EER 模型轉換**

- 一對多 (1:N)：將主鍵設為外鍵。
- 多對多 (M:N)：創建新關係，主鍵為兩個實體的主鍵組合。
- 一對一 (1:1)：將主鍵設為另一表的外鍵。

---

## **正規化與異常**

- **正規化**：分解含異常的關係為結構良好的關係。
  - **插入異常**：新增資料時需重複輸入。
  - **刪除異常**：刪除一行可能導致重要數據遺失。
  - **修改異常**：更新多行資料時造成不一致。
- **第一正規化 (1NF)**：無多值屬性。
- **第二正規化 (2NF)**：非鍵屬性需完全依賴主鍵。
- **第三正規化 (3NF)**：無傳遞依賴。

---
