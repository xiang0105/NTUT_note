# 第七章「Databases in Applications

## 學習目標

1. 定義相關術語。
2. 解釋客戶端/伺服器系統的三個組件：呈現、處理與儲存。
3. 區分兩層與三層架構。
4. 描述網頁應用程式的主要組件與資訊流。
5. 說明如何使用 Java（JSP）與 Python 在三層架構中連接資料庫。
6. 理解交易完整性概念。
7. 比較樂觀與悲觀的並發控制。
8. 了解應用程式安全性的基本概念。

---

## 客戶端/伺服器架構

- **網路計算模型**：將處理分配至客戶端與伺服器。
- **客戶端**：如 PC、智慧手機、平板，負責請求與使用服務。
- **伺服器**：如資料庫伺服器或網頁伺服器，提供服務。

---

## 應用程式分割

- **定義**：將應用程式的部分程式碼放在客戶端與伺服器不同位置。
- **優勢**：
  - 提升效能。
  - 增強互操作性。
  - 平衡工作負載。

---

## Fat 與 Thin 客戶端

- **Fat 客戶端**：處理大部分的邏輯，包括呈現、業務規則及資料庫功能。
- **Thin 客戶端**：主要提供使用者介面及部分應用程式處理，無或僅有有限的本地資料儲存。

---

## 網頁應用程式組件

- **資料庫伺服器**：例如 Oracle、MySQL。
- **網頁伺服器**：處理 HTTP 請求，例如 Apache。
- **應用伺服器**：例如 MS ASP.NET、PHP。
- **瀏覽器**：例如 Chrome、Firefox。

---

## Middleware 與 APIs

- **Middleware**：中介軟體，讓應用程式可以與其他軟體互操作。
- **API**：應用程式介面，提供例行程序操作作業系統。
- **常見資料庫 API**：ODBC、ADO.NET、JDBC。

**使用步驟**：

1. 識別並註冊資料庫驅動程式。
2. 開啟與資料庫的連線。
3. 執行查詢。
4. 處理查詢結果。
5. 重複步驟 3–4。
6. 關閉資料庫連線。

---

## 交易完整性：ACID 規則

1. **原子性（Atomicity）**：交易不可分割。
2. **一致性（Consistency）**：交易前後約束不變。
3. **隔離性（Isolation）**：交易完成前對其他使用者不可見。
4. **持久性（Durability）**：交易結果是永久性的。

---

## 並發控制技術

1. **可序列化性（Serializability）**：確保一個交易完成後再開始另一個。
2. **鎖定機制（Locking Mechanisms）**：
   - **共享鎖**：允許讀取但不可更新。
   - **獨占鎖**：完全禁止其他使用者存取。
3. **版本控制（Versioning）**：避免鎖定，衝突時回滾更新。
